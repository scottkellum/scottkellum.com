---
import H1 from '../components/type/H1.astro';
import Meta from '../components/type/Meta.astro';

export interface Props {
	title: string;
	author: string;
	publishDate: string;
	heroImage: string;
	alt: string;
}

function titleTransform(t) {
  t = t.replaceAll('[', '<strong>');
  t = t.replaceAll(']', '</strong>');
  return t;
}

const { title, author, publishDate, heroImage, alt } = Astro.props;
---

<div class="layout">
	<article class="content">
		<div>
			<header>
				{heroImage && <img width="720" height="420" class="hero-image" loading="lazy" src={heroImage} alt={alt} />}
				<Meta class="publish-date">{publishDate}</Meta>
				<H1 class="title">{titleTransform(title)}</H1>
			</header>
			<main>
				<slot />
			</main>
		</div>
	</article>
</div>

<style global>
	article {
		width: max(100% - 5.5rem, 5vw);
		max-width: 80rem;
		margin-inline: auto;
		margin-block: 2.75rem;
	}
	header {
		position: relative;
	}
	.hero-image {
		width: 60%;
		height: auto;
		max-height: 70%;
		position: absolute;
		inset: 0;
		margin: auto;
		z-index: -1;
		object-fit: cover;
		filter: brightness(5) contrast(0.8) grayscale(1);
		mix-blend-mode: multiply;
	}
	.H1 {
		mix-blend-mode: multiply;
	}
	.Meta {
		position: absolute;
		top: 3rem;
		left: -1rem;
	}
	.main {
		max-width: ;
	}
</style>
